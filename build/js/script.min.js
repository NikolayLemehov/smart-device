"use strict";var KeyCode={BACKSPACE:8,ESC:27};!function(){function e(e){this.className=e,this.element=document.querySelector("."+e),this.toggle=this.element.querySelector(".page-footer__toggle"),this.plus=this.toggle.querySelector(".page-footer__plus"),this.minus=this.toggle.querySelector(".page-footer__minus"),this.isClosed=this.element.classList.contains(this.className+"--closed"),this.isAllExisting=this.element&&this.toggle&&this.plus&&this.minus}e.prototype.close=function(){this.element.classList.add(this.className+"--closed"),this.plus.style.display="block",this.minus.style.display="none",this.isClosed=!0},e.prototype.open=function(){this.element.classList.remove(this.className+"--closed"),this.plus.style.display="none",this.minus.style.display="block",this.isClosed=!1},e.prototype.removeNoJs=function(){this.element.classList.remove(this.className+"--nojs")};function t(e){e.isAllExisting&&(e.removeNoJs(),e.toggle.addEventListener("click",function(){e.isClosed?(n.isAllExisting&&o.isAllExisting&&[n,o].forEach(function(e){e.isClosed||e.close()}),e.open()):e.close()}))}var n=new e("page-footer__menu"),o=new e("page-footer__our-contacts");t(n),t(o)}();var QuestionsSection=function(e){this.form=e,this.questionsPhone=e.querySelector(".questions__phone"),this.submitBtn=e.querySelector('button[type="submit"]'),this.name=e.querySelector('[name="name"]'),this.phone=e.querySelector('[name="phone"]'),this.question=e.querySelector('[name="question"]'),this.isAllExisting=this.form&&this.questionsPhone&&this.submitBtn&&this.name&&this.phone&&this.question};!function(){function t(e){var t=e.questionsPhone,n=e.phone,o=n.value,s=o.match(/\+7\(\d{3}\)\d{7}/);(s?s[0]:null)===o?(t.classList.contains("questions__phone--no-match")&&t.classList.remove("questions__phone--no-match"),n.setCustomValidity("")):(t.classList.add("questions__phone--no-match"),n.setCustomValidity("Номер телефона должен соответствовать следующий маске +7(000)0000000"))}function e(e){var n=e.questionsPhone,o=e.phone;function s(e){return e?e[0]:null}o.addEventListener("focus",function(){""===o.value&&(o.value="+7(")}),o.addEventListener("change",function(){t(e)}),o.addEventListener("keyup",function(e){var t=o.value;e.keyCode!==KeyCode.BACKSPACE||!t.match(/\+7\(\d{3}/)||t.match(/\+7\(\d{3}\)\d*/)?(s(t.match(/\+7\(\d{3}/))===t&&(o.value=t+")"),s(t.match(/(\+7\((\d){3}\)?(\d){0,7})|\+7\((\d){0,3}/))===t?n.classList.contains("questions__phone--no-match")&&n.classList.remove("questions__phone--no-match"):(n.classList.add("questions__phone--no-match"),o.setCustomValidity("Номер телефона должен соответствовать следующий маске +7(000)0000000"))):o.value=t.slice(0,-1)})}var n=new QuestionsSection(document.querySelector("main .questions__inner form"));n.isAllExisting&&(n.submitBtn.addEventListener("click",function(e){t(n),n.form.checkValidity()&&e.preventDefault()}),e(n),window.validateQuestions=e,window.questions={validate:e,validatePhone:t})}(),function(){var e=document.querySelector(".main-nav__recall a"),t=document.querySelector("#questions-popup").content.querySelector(".questions--popup");if(e&&t){var n,o=((n=t.cloneNode(!0)).style.display="none",document.body.appendChild(n),document.body.querySelector(".questions--popup")),s=o.querySelector("form"),i=o.querySelector(".questions__close");if(o&&s&&i){var l=new QuestionsSection(s);if(l.isAllExisting){var a={name:"",phone:"",question:"",isSupport:!0};try{a.name=localStorage.getItem("nameField"),a.phone=localStorage.getItem("phoneField"),a.question=localStorage.getItem("questionField")}catch(e){a.isSupport=!1}var u=function(e){e.keyCode===KeyCode.ESC&&r()},c=function(e){e.target.classList.contains("questions--popup")&&r()},r=function(){document.documentElement.style.overflow="",o.style.display="none",document.removeEventListener("keydown",u),window.removeEventListener("click",c)};window.questions.validate(l),i.addEventListener("click",function(e){e.preventDefault(),r()}),e.addEventListener("click",function(e){e.preventDefault(),document.documentElement.style.overflow="hidden",o.style.display="flex",a.name&&(l.name.value=a.name),a.phone&&(l.phone.value=a.phone),a.question&&(l.question.value=a.question),l.name.focus(),document.addEventListener("keydown",u),window.addEventListener("click",c)}),l.submitBtn.addEventListener("click",function(e){window.questions.validatePhone(l),l.form.checkValidity()&&(e.preventDefault(),a.isSupport&&(localStorage.setItem("nameField",l.name.value),localStorage.setItem("phoneField",l.phone.value),localStorage.setItem("questionField",l.question.value)))})}}}}(),document.querySelectorAll("a.scroll-to").forEach(function(n){n.addEventListener("click",function(e){e.preventDefault();var t=n.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})})});